import{g as l}from"./aplication-BbQEJJud.js";import{a as c}from"./vacancy-CjHoOqcr.js";import{D as m}from"./DataTable-lpC7ORQz.js";import{_ as g,c as p,a as o,e as h,t as n,r as d,o as y}from"./index-C0iXwPwW.js";import"./http-lBh2inUk.js";import"./conversors-Bxahe57Q.js";import"./SearchInput-wRdvrFLq.js";import"./MyButton-8NTvTHKk.js";const u={name:"AplicationsVacancy",components:{DataTable:m},data(){return{vaga:{},items:[],columns:[{key:"person.name",title:"Nome"},{key:"person.email",title:"Email"},{key:"status",title:"Estado"},{key:"createdAt",title:"Criado em",type:"date"}],loading:!1,total:0,page:1,totalPage:0,search:""}},mounted(){this.getAplicationsByVacancy(),this.getVacancyDetail()},methods:{async getAplicationsByVacancy(){this.loading=!0;try{const{data:a}=await l(this.$route.params.id,this.filters);this.items=a.data,this.total=a.meta.total,this.totalPage=a.meta.totalPages}catch(a){this.$snotify.error(a)}finally{this.loading=!1}},async getVacancyDetail(){this.loading=!0;try{const a=await c(this.$route.params.id);this.vaga=a.data}catch(a){this.$snotify.error(a)}finally{this.loading=!1}},handleLoadMore(a){this.page+=a,this.getAplicationsByVacancy()},handleSearch(a){this.search=a,this.page=1,this.items=[],this.getAplicationsByVacancy()}},computed:{filters(){return{page:this.page,search:this.search}}}},f={class:"card"};function v(a,e,P,V,t,s){const i=d("DataTable");return y(),p("main",null,[o("section",f,[o("header",null,[o("h1",null,"Candidatos a vaga "+n(t.vaga.title),1),o("span",null,n(t.vaga.workModel)+" - "+n(t.vaga.employmentType),1)]),h(i,{items:t.items,columns:t.columns,loading:t.loading,totalItems:t.total,totalPage:t.totalPage,currentPage:t.page,onOnSearch:s.handleSearch,onOnNextPage:e[0]||(e[0]=r=>s.handleLoadMore(1)),onOnPreviousPage:e[1]||(e[1]=r=>s.handleLoadMore(-1))},null,8,["items","columns","loading","totalItems","totalPage","currentPage","onOnSearch"])])])}const M=g(u,[["render",v],["__scopeId","data-v-5a37e18b"]]);export{M as default};
