import{D as M}from"./DataTable-DB9wobqK.js";import{I as g,_ as V,h as _,w as c,e as s,f as y,r,a,t as k,o as d,c as f}from"./index-DI6tQA7K.js";import{r as b,l as v}from"./vacancy-BiBzpFPG.js";import{M as w}from"./ModalBase-BDPWuOn5.js";import{M as D}from"./MyButton-BbttQ0pn.js";import"./conversors-iuaU3Whz.js";import"./http-BD6d8YlU.js";const I={name:"DeleteVacancyModal",components:{ModalBase:w,Icon:g,MyButton:D},props:{show:{type:Boolean,default:!1},dataForm:{type:Object}},emits:["onClose","onConfirm"],data(){return{loading:!1}},methods:{async deleteVacancy(){this.loading=!0;try{await b(this.dataForm.id),this.$snotify.success("Vaga excluída com sucesso!"),this.$emit("onConfirm"),this.$emit("onClose")}catch(e){this.$snotify.error("Erro ao excluir a vaga: "+e)}finally{this.loading=!1}}}};function B(e,o,m,C,t,n){const l=r("Icon"),u=r("MyButton"),h=r("ModalBase");return d(),_(h,{open:m.show,loading:t.loading,title:"Confirmar Exclusão",onOnClose:o[0]||(o[0]=i=>e.$emit("onClose"))},{content:c(()=>[a("section",null,[s(l,{icon:"carbon:warning"}),a("div",null,[a("p",null,[o[1]||(o[1]=y(" Tem certeza que deseja excluir a vaga ")),a("span",null,k(m.dataForm?.title),1),o[2]||(o[2]=y(" ? "))]),o[3]||(o[3]=a("p",null,"Essa ação não pode ser desfeita!",-1))])])]),actions:c(()=>[s(u,{class:"btn danger",loading:t.loading,onClick:n.deleteVacancy},{default:c(()=>o[4]||(o[4]=[y("Confirmar")])),_:1},8,["loading","onClick"])]),_:1},8,["open","loading"])}const O=V(I,[["render",B],["__scopeId","data-v-e1b7b5e3"]]),T={name:"RecruiterVacancy",components:{DataTable:M,DeleteVacancyModal:O,Icon:g},data(){return{showDeleteVacancyModal:!1,loading:!1,columns:[{key:"title",title:"Título"},{key:"employmentType",title:"Tipo de vaga"},{key:"createdAt",title:"Criado em",type:"date"}],items:[],editItem:{},total:0,page:1,search:""}},mounted(){this.getVacancies()},methods:{refresh(){this.items=[],this.getVacancies()},async getVacancies(){this.closeAllModals(),this.loading=!0;try{const e=await v(this.filters);this.items.push(...e.data.vacancies),this.total=e.total}catch(e){this.$snotify.error(e)}finally{this.loading=!1}},handleSearch(e){this.search=e,this.page=1,this.items=[],this.getVacancies()},handleConfirmDelete(e){this.editItem=e,this.showDeleteVacancyModal=!0},closeAllModals(){this.editItem={},this.showDeleteVacancyModal=!1},handleLoadMore(){this.page++,this.getVacancies()},handleEditVacancy(e){this.$router.push({name:"recruiterVacancyForm",params:{id:e.id}})}},computed:{filters(){return{page:this.page,search:this.search}},loadMore(){return this.items.length<this.total}}},E={class:"card"},x=["onClick"],F=["onClick"],A=["onClick"],S=["onClick"];function $(e,o,m,C,t,n){const l=r("Icon"),u=r("DataTable"),h=r("DeleteVacancyModal");return d(),f("main",null,[a("section",E,[a("header",null,[o[1]||(o[1]=a("h1",null,"Vagas",-1)),a("button",{class:"rounded",onClick:o[0]||(o[0]=()=>e.$router.push({name:"recruiterVacancyForm"})),title:"Nova Vaga"},[s(l,{icon:"qlementine-icons:new-16"})])]),s(u,{items:t.items,columns:t.columns,loading:t.loading,total:t.total,loadMore:n.loadMore,onOnLoadMore:n.handleLoadMore,onOnSearch:n.handleSearch},{actions:c(({item:i})=>[i.status?(d(),f("button",{key:0,class:"rounded warning",onClick:p=>e.handleToggleVacancy(i),title:"Pausar"},[s(l,{icon:"ic:round-pause"})],8,x)):(d(),f("button",{key:1,class:"rounded primary",onClick:p=>e.handleToggleVacancy(i),title:"Ativar"},[s(l,{icon:"ic:round-play-arrow"})],8,F)),a("button",{class:"rounded success",onClick:p=>n.handleEditVacancy(i),title:"Editar"},[s(l,{icon:"carbon:edit"})],8,A),a("button",{class:"rounded danger",onClick:p=>n.handleConfirmDelete(i),title:"Excluir"},[s(l,{icon:"carbon:trash-can"})],8,S)]),_:1},8,["items","columns","loading","total","loadMore","onOnLoadMore","onOnSearch"])]),s(h,{show:t.showDeleteVacancyModal,dataForm:t.editItem,onOnClose:n.closeAllModals,onOnConfirm:n.refresh},null,8,["show","dataForm","onOnClose","onOnConfirm"])])}const G=V(T,[["render",$],["__scopeId","data-v-6b976e4a"]]);export{G as default};
