import{g as n}from"./aplication-CLUnXiaY.js";import{a as r}from"./vacancy-D-6Ezcen.js";import{D as l}from"./DataTable-D8tIaOlJ.js";import{_ as c,c as h,a as e,e as d,t as s,r as m,o as p}from"./index-lwkl6pt1.js";import"./http-BaOr58bF.js";import"./conversors-D09fu8WP.js";import"./SearchInput-DpSowfGQ.js";import"./MyButton-BDPwgzBb.js";const g={name:"AplicationsVacancy",components:{DataTable:l},data(){return{vaga:{},items:[],columns:[{key:"person.name",title:"Nome"},{key:"person.email",title:"Email"},{key:"status",title:"Estado"},{key:"createdAt",title:"Criado em",type:"date"}],loading:!1,total:0,page:1,search:""}},mounted(){this.getAplicationsByVacancy(),this.getVacancyDetail()},methods:{async getAplicationsByVacancy(){this.loading=!0;try{const a=await n(this.$route.params.id,this.filters);this.items.push(...a.data.data),this.total=a.data.meta.total}catch(a){this.$snotify.error(a)}finally{this.loading=!1}},async getVacancyDetail(){this.loading=!0;try{const a=await r(this.$route.params.id);this.vaga=a.data}catch(a){this.$snotify.error(a)}finally{this.loading=!1}},handleLoadMore(){this.page++,this.getAplicationsByVacancy()},handleSearch(a){this.search=a,this.page=1,this.items=[],this.getAplicationsByVacancy()}},computed:{filters(){return{page:this.page,search:this.search}},loadMore(){return this.page<this.total}}},y={class:"card"};function u(a,f,_,V,t,o){const i=m("DataTable");return p(),h("main",null,[e("section",y,[e("header",null,[e("h1",null,"Candidatos a vaga "+s(t.vaga.title),1),e("span",null,s(t.vaga.workModel)+" - "+s(t.vaga.employmentType),1)]),d(i,{items:t.items,columns:t.columns,loading:t.loading,total:t.total,loadMore:o.loadMore,onOnLoadMore:o.handleLoadMore,onOnSearch:o.handleSearch},null,8,["items","columns","loading","total","loadMore","onOnLoadMore","onOnSearch"])])])}const O=c(g,[["render",u],["__scopeId","data-v-cd87a30f"]]);export{O as default};
