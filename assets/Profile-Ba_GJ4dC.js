import{h,F as w,c as U,a as b}from"./http-BeVj7LiC.js";import{M as k,h as G}from"./moment-BbERYvEN.js";import{M as B}from"./SwitchButton-JIAIN9gj.js";import{I as M,_ as x,c as f,a as s,b as _,t as y,n as D,e as t,r as p,F as S,i as A,g as O,o as m,k as L,v as P,j as T,h as I,w as g,f as E,l as j}from"./index-KmYJkn1P.js";import{M as R}from"./ModalBase-Cls_K1Wy.js";import{g as H,u as z}from"./user-BqcKAj-J.js";const J={name:"MySelect",props:{modelValue:{type:[String,Number,null],required:!0},options:{type:Array,required:!0},label:{type:String,required:!1},error:{type:String,required:!1}},data(){return{isOpen:!1}},components:{Icon:M},computed:{selectedOptionTitle(){const l=this.options.find(o=>o.title===this.modelValue);return l?l.title:null}},mounted(){document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},methods:{toggleDropdown(){this.isOpen=!this.isOpen},selectOption(l){this.$emit("update:modelValue",l.title),this.isOpen=!1},handleClickOutside(l){this.$el.contains(l.target)||(this.isOpen=!1)}}},K={class:"wrapper"},Q={key:0,class:"label"},W={class:"value"},X={key:1,class:"dropdown"},Y=["onClick"],Z={key:0,class:"error"};function $(l,o,n,c,e,a){const i=p("Icon");return m(),f("main",null,[s("div",K,[n.label?(m(),f("label",Q,y(n.label),1)):_("",!0),s("div",{class:D(["select",{error:!!n.error}]),onClick:o[0]||(o[0]=(...d)=>a.toggleDropdown&&a.toggleDropdown(...d))},[s("span",W,y(a.selectedOptionTitle||"Selecione"),1),s("span",{class:D(["arrow",{open:e.isOpen}])},[t(i,{icon:"bx:down-arrow"})],2)],2),e.isOpen?(m(),f("ul",X,[(m(!0),f(S,null,A(n.options,d=>(m(),f("li",{key:d.id,onClick:O(V=>a.selectOption(d),["stop"]),class:D(["option",{selected:d.title===n.modelValue}])},y(d.title),11,Y))),128))])):_("",!0)]),n.error?(m(),f("span",Z,y(n.error),1)):_("",!0)])}const F=x(J,[["render",$],["__scopeId","data-v-0a41f1a2"]]),ee={name:"MyAccordeon",props:{title:{type:String,required:!0},isOpen:{type:Boolean,default:!1}},data(){return{expanded:!1}},components:{Icon:M},mounted(){this.expanded=this.isOpen},methods:{toggle(){this.expanded=!this.expanded}}},oe={class:"accordeon"},re={class:"title"},le={class:"body"};function te(l,o,n,c,e,a){const i=p("Icon");return m(),f("div",oe,[s("div",{class:D(["header",{expanded:e.expanded}]),onClick:o[0]||(o[0]=(...d)=>a.toggle&&a.toggle(...d))},[s("span",re,y(n.title),1),t(i,{icon:"bx:down-arrow"})],2),L(s("div",le,[T(l.$slots,"default",{},void 0)],512),[[P,e.expanded]])])}const se=x(ee,[["render",te],["__scopeId","data-v-e0d60593"]]),C={BACHARELADO:"Bacharelado",LICENCIATURA:"Licenciatura",TECNOLOGO:"Tecnólogo",MESTRADO:"Mestrado",DOUTORADO:"Doutorado",POS_GRADUACAO:"Pós-graduação",ENSINO_TECNICO:"Ensino Técnico",ENSINO_MEDIO:"Ensino Médio"},N={CONCLUIDO:"Concluído",CURSANDO:"Cursando",TRANCADO:"Trancado",NAO_CONCLUIDO:"Não concluído"},ie=(l,o)=>h.authApi().post(`/person/${l}/graduation`,o),ne=l=>h.authApi().get(`/person/${l}/graduation`),ae=(l,o,n)=>h.authApi().put(`/person/${l}/graduation/${o}`,n),ue={name:"GraduationModal",components:{ModalBase:R,FormInput:w,MyButton:k,MySelect:F},props:{show:{type:Boolean,default:!1},dataForm:{type:Object}},emits:["onClose","onSave"],data(){return{form:{},errors:{},loading:!1}},watch:{dataForm(){this.dataForm&&(this.form={...this.form,...this.dataForm})}},methods:{validate(){U({institutionName:b().required("Nome da instituição é obrigatório"),courseName:b().required("Nome do curso é obrigatório"),educationLevel:b().oneOf(Object.values(C),"Nível inválido").required("Nível é obrigatório"),status:b().oneOf(Object.values(N),"Status inválido").required("Status é obrigatório"),startDate:b().required("Data de início é obrigatória"),endDate:b().required("Data de conclusão é obrigatória")}).validate(this.form,{abortEarly:!1}).then(()=>{this.errors={},this.saveGraduation()}).catch(o=>{const n={};o.inner.forEach(c=>{n[c.path]=c.message}),this.errors=n})},async saveGraduation(){this.loading=!0;try{const l=!!this.form.id,o=localStorage.getItem("uid");l&&delete this.form.id,l?await ae(o,this.dataForm.id,this.form):await ie(o,this.form),this.$snotify.success(`Graduação ${l?"atualizada":"criada"} com sucesso`),this.$emit("onSave"),this.closeModal()}catch(l){this.$snotify.error("Erro ao salvar a graduação: "+l)}finally{this.loading=!1}},closeModal(){this.form={},this.errors={},this.$emit("onClose")}},computed:{levelList(){return Object.keys(C).map(l=>({id:l,title:C[l]}))},statusList(){return Object.keys(N).map(l=>({id:l,title:N[l]}))}}},de={class:"flex"};function me(l,o,n,c,e,a){const i=p("FormInput"),d=p("MySelect"),V=p("MyButton"),v=p("ModalBase");return m(),I(v,{open:n.show,loading:e.loading,title:"Nova Escolaridade",onOnClose:o[7]||(o[7]=u=>l.$emit("onClose"))},{content:g(()=>[s("form",{onSubmit:o[6]||(o[6]=O((...u)=>a.validate&&a.validate(...u),["prevent"]))},[t(i,{label:"Instituição",type:"text",placeholder:"Universidade do Estado de São Paulo",modelValue:e.form.institutionName,"onUpdate:modelValue":o[0]||(o[0]=u=>e.form.institutionName=u),error:e.errors.institutionName,required:""},null,8,["modelValue","error"]),t(i,{label:"Curso",type:"text",placeholder:"Ciência da Computação",modelValue:e.form.courseName,"onUpdate:modelValue":o[1]||(o[1]=u=>e.form.courseName=u),error:e.errors.courseName,required:""},null,8,["modelValue","error"]),t(d,{label:"Nível",options:a.levelList,modelValue:e.form.educationLevel,"onUpdate:modelValue":o[2]||(o[2]=u=>e.form.educationLevel=u),error:e.errors.educationLevel,required:""},null,8,["options","modelValue","error"]),t(d,{label:"Status",options:a.statusList,modelValue:e.form.status,"onUpdate:modelValue":o[3]||(o[3]=u=>e.form.status=u),error:e.errors.status,required:""},null,8,["options","modelValue","error"]),s("div",de,[t(i,{label:"Data de inicio",type:"date",modelValue:e.form.startDate,"onUpdate:modelValue":o[4]||(o[4]=u=>e.form.startDate=u),error:e.errors.startDate,required:""},null,8,["modelValue","error"]),t(i,{label:"Data de conclusão",type:"date",modelValue:e.form.endDate,"onUpdate:modelValue":o[5]||(o[5]=u=>e.form.endDate=u),error:e.errors.endDate,required:""},null,8,["modelValue","error"])])],32)]),actions:g(()=>[t(V,{class:"btn success",loading:e.loading,onClick:a.validate},{default:g(()=>o[8]||(o[8]=[E("Salvar")])),_:1},8,["loading","onClick"])]),_:1},8,["open","loading"])}const pe=x(ue,[["render",me],["__scopeId","data-v-bc4486e3"]]),ce=()=>h.authApi().get("/filter/disability"),fe=()=>h.authApi().get("/filter/gender"),ge=()=>h.authApi().get("/filter/maritalstatus"),he=()=>h.authApi().get("/filter/nationality"),be=()=>h.authApi().get("/filter/education-level"),ye=()=>h.authApi().get("/filter/education-status"),Ve=()=>h.authApi().get("/filter/language-level"),ve={name:"UserCurriculum",data(){return{moment:G,id:null,form:{name:"",email:"",password:"",cpf:"",rg:"",cnh:"",typeCnh:"",hasDisability:!1,typeDisability:"",gender:"",marital_status_id:null,nationality:"",phoneNumber:"",phoneNumber2:"",available_to_travel:!1,salary_claim:null,first_job:!1,presentation:"",postal_code:"",street:"",number:null,complement:"",neighborhood:"",city:"",state:"",country:"",facebook_url:"",instagram_url:"",linkedin_url:"",personal_url:""},disabilities:[],genders:[],maritalStatus:[],nationalities:[],educationLevels:[],educationStatus:[],languageLevels:[],graduations:[],errors:{},loading:!1,showGraduationModal:!1}},components:{FormInput:w,MySwitch:B,MySelect:F,MyButton:k,MyAccordeon:se,GraduationModal:pe},watch:{"form.hasDisability"(l){l||(this.form.typeDisability="")}},created(){this.id=localStorage.getItem("uid")},mounted(){this.loadFilters(),this.loadData(),this.loadGraduations()},methods:{validate(){U({name:b().min(3,"Nome deve ter pelo menos 3 caracteres").required("Nome é obrigatório"),gender:b().min(1,"Selecione um sexo").required("Sexo é obrigatório")}).validate(this.form,{abortEarly:!1}).then(()=>{this.errors={},this.submitForm()}).catch(o=>{const n={};o.inner.forEach(c=>{n[c.path]=c.message}),this.errors=n})},async submitForm(){this.loading=!0;try{delete this.form.id,delete this.form.password,delete this.form.createdAt,delete this.form.updatedAt,console.log("Form submitted with data:",this.form);const l=await z(this.id,this.form);console.log(l)}catch(l){console.log(l)}finally{this.loading=!1}},async loadFilters(){try{const l=await ce(),o=await fe(),n=await ge(),c=await he(),e=await be(),a=await ye(),i=await Ve();this.disabilities=l.data,this.genders=o.data,this.maritalStatus=n.data,this.nationalities=c.data,this.educationLevels=e.data,this.educationStatus=a.data,this.languageLevels=i.data}catch(l){console.error("Error loading filters:",l)}},async loadData(){try{const l=await H(this.id);this.form={...this.form,...l.data,hasDisability:!!l.data.hasDisability,available_to_travel:!!l.data.available_to_travel,first_job:!!l.data.first_job}}catch(l){console.error("Error loading data:",l)}},async loadGraduations(){try{const l=await ne(this.id);this.graduations=l.data}catch(l){console.error("Error loading graduation:",l)}}}},_e={class:"group"},xe={class:"group"},De={class:"group flex"},Ce={class:"group flex"},Ne={class:"group flex"},Se={class:"switch"},Ee={class:"group flex"},Oe={class:"group flex"},we={class:"group"},Ue={class:"group"},ke={class:"group flex"},Me={class:"group"},Ae={class:"group flex"},Le={class:"group flex"},Ie={class:"group flex"},Fe={class:"switch"},qe={class:"switch"},Ge={key:0},Be={class:"group"},Pe=["error"],Te={class:"group flex"},je={class:"group flex"};function Re(l,o,n,c,e,a){const i=p("FormInput"),d=p("MySwitch"),V=p("MySelect"),v=p("MyAccordeon"),u=p("MyButton"),q=p("GraduationModal");return m(),f(S,null,[s("form",{onSubmit:o[30]||(o[30]=O((...r)=>a.validate&&a.validate(...r),["prevent"]))},[t(v,{title:"Dados pessoais",isOpen:!0},{default:g(()=>[s("div",_e,[t(i,{modelValue:e.form.name,"onUpdate:modelValue":o[0]||(o[0]=r=>e.form.name=r),error:e.errors.name,type:"text",placeholder:"Digite seu nome",label:"Name"},null,8,["modelValue","error"])]),s("div",xe,[t(i,{modelValue:e.form.email,"onUpdate:modelValue":o[1]||(o[1]=r=>e.form.email=r),error:e.errors.email,type:"email",placeholder:"Digite seu e-mail",label:"Email"},null,8,["modelValue","error"])]),s("div",De,[t(i,{modelValue:e.form.cpf,"onUpdate:modelValue":o[2]||(o[2]=r=>e.form.cpf=r),error:e.errors.cpf,type:"text",placeholder:"Digite seu CPF",label:"CPF"},null,8,["modelValue","error"]),t(i,{modelValue:e.form.rg,"onUpdate:modelValue":o[3]||(o[3]=r=>e.form.rg=r),error:e.errors.rg,type:"text",placeholder:"Digite seu RG",label:"RG"},null,8,["modelValue","error"])]),s("div",Ce,[t(i,{modelValue:e.form.cnh,"onUpdate:modelValue":o[4]||(o[4]=r=>e.form.cnh=r),error:e.errors.cnh,type:"text",placeholder:"Digite sua CNH",label:"CNH"},null,8,["modelValue","error"]),t(i,{modelValue:e.form.typeCnh,"onUpdate:modelValue":o[5]||(o[5]=r=>e.form.typeCnh=r),error:e.errors.typeCnh,type:"text",placeholder:"Digite o tipo de CNH",label:"Tipo de CNH"},null,8,["modelValue","error"])]),s("div",Ne,[s("div",Se,[o[33]||(o[33]=s("span",null,"Possui deficiência?",-1)),t(d,{modelValue:e.form.hasDisability,"onUpdate:modelValue":o[6]||(o[6]=r=>e.form.hasDisability=r)},null,8,["modelValue"])]),e.form.hasDisability?(m(),I(V,{key:0,options:e.disabilities,modelValue:e.form.typeDisability,"onUpdate:modelValue":o[7]||(o[7]=r=>e.form.typeDisability=r),label:"Deficiência",error:e.errors.typeDisability},null,8,["options","modelValue","error"])):_("",!0)]),s("div",Ee,[t(V,{options:e.genders,modelValue:e.form.gender,"onUpdate:modelValue":o[8]||(o[8]=r=>e.form.gender=r),label:"Sexo",error:e.errors.gender},null,8,["options","modelValue","error"]),t(V,{options:e.maritalStatus,modelValue:e.form.marital_status_id,"onUpdate:modelValue":o[9]||(o[9]=r=>e.form.marital_status_id=r),label:"Estado Civil",error:e.errors.marital_status_id},null,8,["options","modelValue","error"])]),s("div",Oe,[t(i,{modelValue:e.form.phoneNumber,"onUpdate:modelValue":o[10]||(o[10]=r=>e.form.phoneNumber=r),error:e.errors.phoneNumber,type:"tel",mask:"tel",placeholder:"(99) 99999-9999",label:"Telefone"},null,8,["modelValue","error"]),t(i,{modelValue:e.form.phoneNumber2,"onUpdate:modelValue":o[11]||(o[11]=r=>e.form.phoneNumber2=r),error:e.errors.phoneNumber2,type:"tel",mask:"tel",placeholder:"(99) 99999-9999",label:"Telefone 2"},null,8,["modelValue","error"])])]),_:1}),t(v,{title:"Localidade"},{default:g(()=>[s("div",we,[t(V,{options:e.nationalities,modelValue:e.form.nationality,"onUpdate:modelValue":o[12]||(o[12]=r=>e.form.nationality=r),label:"Nacionalidade",error:e.errors.nationality},null,8,["options","modelValue","error"])]),s("div",Ue,[t(i,{modelValue:e.form.postal_code,"onUpdate:modelValue":o[13]||(o[13]=r=>e.form.postal_code=r),error:e.errors.postal_code,type:"text",placeholder:"Digite o CEP",label:"CEP"},null,8,["modelValue","error"])]),s("div",ke,[t(i,{modelValue:e.form.street,"onUpdate:modelValue":o[14]||(o[14]=r=>e.form.street=r),error:e.errors.street,type:"text",placeholder:"Digite a rua",label:"Rua"},null,8,["modelValue","error"]),t(i,{modelValue:e.form.number,"onUpdate:modelValue":o[15]||(o[15]=r=>e.form.number=r),error:e.errors.number,type:"number",placeholder:"555",label:"Número"},null,8,["modelValue","error"])]),s("div",Me,[t(i,{modelValue:e.form.complement,"onUpdate:modelValue":o[16]||(o[16]=r=>e.form.complement=r),error:e.errors.complement,type:"text",placeholder:"Fundo A",label:"Complemento"},null,8,["modelValue","error"])]),s("div",Ae,[t(i,{modelValue:e.form.neighborhood,"onUpdate:modelValue":o[17]||(o[17]=r=>e.form.neighborhood=r),error:e.errors.neighborhood,type:"text",placeholder:"Limeira",label:"Bairro"},null,8,["modelValue","error"]),t(i,{modelValue:e.form.city,"onUpdate:modelValue":o[18]||(o[18]=r=>e.form.city=r),error:e.errors.city,type:"text",placeholder:"São Paulo",label:"Cidade"},null,8,["modelValue","error"])]),s("div",Le,[t(i,{modelValue:e.form.state,"onUpdate:modelValue":o[19]||(o[19]=r=>e.form.state=r),error:e.errors.state,type:"text",placeholder:"SP",label:"Estado"},null,8,["modelValue","error"]),t(i,{modelValue:e.form.country,"onUpdate:modelValue":o[20]||(o[20]=r=>e.form.country=r),error:e.errors.country,type:"text",placeholder:"Brasil",label:"País"},null,8,["modelValue","error"])])]),_:1}),t(v,{title:"Profissional"},{default:g(()=>[s("div",Ie,[s("div",Fe,[o[34]||(o[34]=s("span",null,"Disponibilidade para viagem?",-1)),t(d,{modelValue:e.form.available_to_travel,"onUpdate:modelValue":o[21]||(o[21]=r=>e.form.available_to_travel=r)},null,8,["modelValue"])]),s("div",qe,[o[35]||(o[35]=s("span",null,"Primeiro Emprego?",-1)),t(d,{modelValue:e.form.first_job,"onUpdate:modelValue":o[22]||(o[22]=r=>e.form.first_job=r)},null,8,["modelValue"])]),t(i,{modelValue:e.form.salary_claim,"onUpdate:modelValue":o[23]||(o[23]=r=>e.form.salary_claim=r),error:e.errors.salary_claim,type:"number",placeholder:"5000",label:"Pretensão Salarial"},null,8,["modelValue","error"])])]),_:1}),t(v,{title:"Escolaridade",class:"school"},{default:g(()=>[t(u,{class:"primary",onClick:o[24]||(o[24]=()=>e.showGraduationModal=!0)},{default:g(()=>o[36]||(o[36]=[E("Nova")])),_:1}),e.graduations.length>0?(m(),f("ul",Ge,[(m(!0),f(S,null,A(e.graduations,r=>(m(),f("li",{key:r.id},[s("p",null,y(r.courseName),1),s("span",null,y(r.status)+" - "+y(e.moment(r.endDate).format("L")),1)]))),128))])):_("",!0)]),_:1}),t(v,{title:"Social"},{default:g(()=>[s("div",Be,[L(s("textarea",{"onUpdate:modelValue":o[25]||(o[25]=r=>e.form.presentation=r),error:e.errors.presentation,placeholder:"Apresentação"},null,8,Pe),[[j,e.form.presentation]])]),s("div",Te,[t(i,{modelValue:e.form.facebook_url,"onUpdate:modelValue":o[26]||(o[26]=r=>e.form.facebook_url=r),error:e.errors.facebook_url,type:"url",placeholder:"Digite o link do facebook",label:"Facebook"},null,8,["modelValue","error"]),t(i,{modelValue:e.form.instagram_url,"onUpdate:modelValue":o[27]||(o[27]=r=>e.form.instagram_url=r),error:e.errors.instagram_url,type:"url",placeholder:"Digite o link do instagram",label:"Instagram"},null,8,["modelValue","error"])]),s("div",je,[t(i,{modelValue:e.form.linkedin_url,"onUpdate:modelValue":o[28]||(o[28]=r=>e.form.linkedin_url=r),error:e.errors.linkedin_url,type:"url",placeholder:"Digite o link do linkedin",label:"LinkedIn"},null,8,["modelValue","error"]),t(i,{modelValue:e.form.personal_url,"onUpdate:modelValue":o[29]||(o[29]=r=>e.form.personal_url=r),error:e.errors.personal_url,type:"url",placeholder:"Digite o link pessoal",label:"Site Pessoal"},null,8,["modelValue","error"])])]),_:1}),t(u,{class:"primary",loading:e.loading},{default:g(()=>o[37]||(o[37]=[E("Atualizar")])),_:1},8,["loading"])],32),t(q,{show:e.showGraduationModal,onOnClose:o[31]||(o[31]=r=>e.showGraduationModal=!1),onOnSave:o[32]||(o[32]=r=>e.showGraduationModal=!1)},null,8,["show"])],64)}const He=x(ve,[["render",Re],["__scopeId","data-v-8ba88238"]]),ze={name:"UserProfile",components:{Curriculum:He}};function Je(l,o,n,c,e,a){const i=p("Curriculum");return m(),f("div",null,[t(i)])}const $e=x(ze,[["render",Je],["__scopeId","data-v-65fd4b71"]]);export{$e as default};
