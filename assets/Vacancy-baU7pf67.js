import{D as m}from"./DataTable-Bm7SzrhG.js";import{I as p,_ as g,c as r,a as t,e as a,r as h,w as y,o as d}from"./index-CEB7vAn4.js";import{h as f}from"./http-BD6d8YlU.js";import{t as V}from"./conversors-aU8gtWUe.js";import"./MyButton--PsirZKo.js";const _=e=>f.authApi().get(`/vacancy?${V(e)}`),k={name:"RecruiterVacancy",components:{DataTable:m,Icon:p},data(){return{showDeleteVacancyModal:!1,loading:!1,columns:[{key:"title",title:"TÃ­tulo"},{key:"employmentType",title:"Tipo de vaga"},{key:"createdAt",title:"Criado em",type:"date"}],items:[],editItem:{},total:0,page:1,search:""}},mounted(){this.getVacancies()},methods:{refresh(){this.items=[],this.getVacancies()},async getVacancies(){this.closeAllModals(),this.loading=!0;try{const e=await _(this.filters);this.items.push(...e.data.vacancies),this.total=e.total}catch(e){this.$snotify.error(e)}finally{this.loading=!1}},handleSearch(e){this.search=e,this.page=1,this.items=[],this.getVacancies()},handleConfirmDelete(e){this.editItem=e,this.showDeleteVacancyModal=!0},closeAllModals(){this.editItem={},this.showDeleteVacancyModal=!1},handleLoadMore(){this.page++,this.getVacancies()}},computed:{filters(){return{page:this.page,search:this.search}},loadMore(){return this.items.length<this.total}}},C={class:"card"},M=["onClick"],v=["onClick"],b=["onClick"],w=["onClick"];function D(e,s,I,T,c,i){const o=h("Icon"),u=h("DataTable");return d(),r("main",null,[t("section",C,[t("header",null,[s[1]||(s[1]=t("h1",null,"Vagas",-1)),t("button",{class:"rounded",onClick:s[0]||(s[0]=()=>e.$router.push({name:"recruiterVacancyCreate"})),title:"Nova Vaga"},[a(o,{icon:"qlementine-icons:new-16"})])]),a(u,{items:c.items,columns:c.columns,loading:c.loading,total:c.total,loadMore:i.loadMore,onOnLoadMore:i.handleLoadMore,onOnSearch:i.handleSearch},{actions:y(({item:n})=>[n.status?(d(),r("button",{key:0,class:"rounded warning",onClick:l=>e.handleToggleVacancy(n),title:"Pausar"},[a(o,{icon:"ic:round-pause"})],8,M)):(d(),r("button",{key:1,class:"rounded primary",onClick:l=>e.handleToggleVacancy(n),title:"Ativar"},[a(o,{icon:"ic:round-play-arrow"})],8,v)),t("button",{class:"rounded success",onClick:l=>e.handleEditVacancy(n)},[a(o,{icon:"carbon:edit"})],8,b),t("button",{class:"rounded danger",onClick:l=>i.handleConfirmDelete(n)},[a(o,{icon:"carbon:trash-can"})],8,w)]),_:1},8,["items","columns","loading","total","loadMore","onOnLoadMore","onOnSearch"])])])}const N=g(k,[["render",D],["__scopeId","data-v-792d6a96"]]);export{N as default};
