import{F as f,c as p,a as t}from"./FormInput-C5ftnFIk.js";import{M as h}from"./MyButton-DrcBuMc_.js";import{u as g,g as y}from"./recruiter-CVXVC8vy.js";import{_ as v,c as V,a as s,e as l,r as u,w as b,f as w,h as _,o as x}from"./index-BLcxalff.js";import"./http-BgvyJrsg.js";import"./conversors-a5ARN5za.js";const E={name:"RecruiterProfile",components:{FormInput:f,MyButton:h},data(){return{form:{},errors:{},loading:!1}},mounted(){this.loadData()},methods:{async loadData(){this.loading=!0;try{const{data:o}=await y(localStorage.getItem("uid"));this.form=o}catch(o){console.error(o)}finally{this.loading=!1}},validate(){p({name:t().required("Nome é obrigatório"),email:t().email("E-mail inválido").required("E-mail é obrigatório"),password:this.form.id?t().min(6,"Senha deve ter pelo menos 6 caracteres"):t().min(6,"Senha deve ter pelo menos 6 caracteres").nullable()}).validate(this.form,{abortEarly:!1}).then(()=>{this.errors={},this.saveRecruiter()}).catch(e=>{const i={};e.inner.forEach(n=>{i[n.path]=n.message}),this.errors=i})},async saveRecruiter(){this.loading=!0;try{delete this.form.id,delete this.form.createdAt,delete this.form.updatedAt,await g(localStorage.getItem("uid"),this.form),this.$snotify.success("Perfil atualizado com sucesso")}catch(o){this.$snotify.error("Erro ao salvar o perfil: "+o)}finally{this.loading=!1}}}},S={class:"card"},B={class:"flex"};function I(o,e,i,n,r,d){const m=u("FormInput"),c=u("MyButton");return x(),V("section",S,[e[5]||(e[5]=s("header",null,[s("h1",null,"Atualizar Perfil")],-1)),s("form",{onSubmit:e[3]||(e[3]=_((...a)=>d.validate&&d.validate(...a),["prevent"]))},[l(m,{label:"Nome",type:"text",placeholder:"Digite o nome",modelValue:r.form.name,"onUpdate:modelValue":e[0]||(e[0]=a=>r.form.name=a),error:r.errors.name,required:""},null,8,["modelValue","error"]),s("div",B,[l(m,{label:"E-mail",type:"email",placeholder:"Digite o e-mail",modelValue:r.form.email,"onUpdate:modelValue":e[1]||(e[1]=a=>r.form.email=a),error:r.errors.email,required:""},null,8,["modelValue","error"]),l(m,{label:"Senha",type:"password",placeholder:"Digite a senha",modelValue:r.form.password,"onUpdate:modelValue":e[2]||(e[2]=a=>r.form.password=a),error:r.errors.password,required:""},null,8,["modelValue","error"])]),l(c,{class:"btn success",type:"submit",loading:r.loading},{default:b(()=>e[4]||(e[4]=[w(" Salvar ")])),_:1},8,["loading"])],32)])}const A=v(E,[["render",I],["__scopeId","data-v-dc7a9eaa"]]);export{A as default};
