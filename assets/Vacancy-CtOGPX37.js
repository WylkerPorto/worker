import{S as p}from"./SearchInput-CAdKpNBp.js";import{l as d}from"./vacancy-BH1wT3_m.js";import{h}from"./http-BD6d8YlU.js";import{_ as u,c as i,a as s,g as m,e as f,r as g,F as y,i as V,t as n,o as l}from"./index-BJUk5Bnl.js";import"./conversors-D9s9cIlT.js";const _=e=>h.authApi().post("/application",e),S={name:"UserVacancy",components:{SearchInput:p},data(){return{loading:!1,items:[],total:0,page:1,search:""}},mounted(){this.getVacancies()},methods:{async getVacancies(){this.loading=!0;try{const e=await d(this.filters);this.items.push(...e.data.vacancies),this.total=e.total}catch(e){this.$snotify.error(e)}finally{this.loading=!1}},handleSearch(){this.page=1,this.items=[],this.getVacancies()},handleLoadMore(){this.page+=1,this.getVacancies()},async handleApply(e){try{await _({vacancyId:e,status:"applied"}),this.$snotify.success("Vaga aplicada com sucesso")}catch(t){this.$snotify.error(t.response.data.statusCode===409?"Vaga ja aplicada":t)}}},computed:{filters(){return{page:this.page,search:this.search}}}},v={class:"container"},k=["onClick"];function C(e,t,b,w,r,o){const c=g("SearchInput");return l(),i("main",v,[s("header",null,[t[2]||(t[2]=s("h1",null,"Vagas disponiveis",-1)),s("form",{onSubmit:t[1]||(t[1]=m((...a)=>o.handleSearch&&o.handleSearch(...a),["stop","prevent"]))},[f(c,{modelValue:r.search,"onUpdate:modelValue":t[0]||(t[0]=a=>r.search=a)},null,8,["modelValue"])],32)]),s("section",null,[(l(!0),i(y,null,V(r.items,a=>(l(),i("div",{class:"card",key:a.id},[s("article",null,[s("h2",null,n(a.title),1),s("p",null,n(a.employmentType)+" - "+n(a.workModel)+" - "+n(a.expirationDate),1)]),s("button",{class:"btn primary",onClick:x=>o.handleApply(a.id)},"Candidatar-se",8,k)]))),128))])])}const F=u(S,[["render",C],["__scopeId","data-v-27ec8c6b"]]);export{F as default};
