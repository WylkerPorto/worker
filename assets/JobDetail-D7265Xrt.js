import{I as f,_ as b,c as y,a as t,e as p,w as r,r as c,d as u,g as m,t as e,f as o,o as i}from"./index-CE6mVOuz.js";import{g as h}from"./vacancy-SFdJcNdy.js";import{u as M,c as k}from"./aplication-DSZgVwj2.js";import{t as C}from"./conversors-Cr9q1EG2.js";import{M as L}from"./MyButton-BnYoF38R.js";import"./http-Bhklev2d.js";const T={name:"JobDetail",components:{Icon:f,MyButton:L},data(){return{toFormatDate:C,vacancy:{},loading:!1}},mounted(){this.getVacancy()},methods:{async getVacancy(){try{const s=await h(this.$route.params.slug);this.vacancy=s.data}catch(s){this.$snotify.error(s.response.data.message)}},async apply(){this.loading=!0;try{await k({vacancyId:parseInt(this.vacancy.id),status:"Candidatura Enviada"}),this.$snotify.success("Vaga aplicada com sucesso!"),this.vacancy.isApplied=!0}catch(s){this.$snotify.error(s)}finally{this.loading=!1}},async remove(){this.loading=!0;try{await M(this.vacancy.applications[0].id,{vacancyId:parseInt(this.vacancy.id),status:"Candidatura Retirada"}),this.$snotify.success("Candidatura removida com sucesso!"),this.vacancy.isApplied=!1}catch(s){this.$snotify.error(s)}finally{this.loading=!1}}},computed:{logado(){return!!localStorage.getItem("login")},candidato(){return this.vacancy.status==="Ativa"&&!this.vacancy.isApplied&&this.logado}}},x={class:"container"},D={class:"flex"},I={key:0},H=["innerHTML"],B=["innerHTML"],V=["innerHTML"],w=["innerHTML"];function _(s,n,A,R,a,l){const v=c("Icon"),d=c("RouterLink"),g=c("MyButton");return i(),y("main",x,[t("header",null,[p(d,{to:{name:"home"}},{default:r(()=>[p(v,{icon:"lets-icons:back"})]),_:1}),n[0]||(n[0]=t("h1",null,"Detalhes da vaga",-1))]),t("section",null,[t("h2",null,e(a.vacancy.title),1),t("div",D,[t("span",null,[n[1]||(n[1]=t("b",null,"Criado em: ",-1)),o(e(a.toFormatDate(a.vacancy.createdAt)),1)]),t("span",null,[n[2]||(n[2]=t("b",null,"Data de expiração: ",-1)),o(e(a.toFormatDate(a.vacancy.expirationDate)),1)])]),n[8]||(n[8]=t("hr",null,null,-1)),t("p",null,[n[3]||(n[3]=t("b",null,"Modelo de trabalho: ",-1)),o(e(a.vacancy.workModel)+" - "+e(a.vacancy.employmentType),1)]),a.vacancy.hideSalary?u("",!0):(i(),y("p",I,[n[4]||(n[4]=t("b",null,"Salário: ",-1)),o(e(a.vacancy.salary),1)])),t("p",null,[n[5]||(n[5]=t("b",null,"Local: ",-1)),o(e(a.vacancy.city)+" - "+e(a.vacancy.state),1)]),n[9]||(n[9]=t("hr",null,null,-1)),n[10]||(n[10]=t("h3",null,"Detalhes da vaga",-1)),t("div",{innerHTML:a.vacancy.description},null,8,H),n[11]||(n[11]=t("p",null,[t("b",null,"Conhecimentos:")],-1)),t("div",{innerHTML:a.vacancy.niceToHave},null,8,B),n[12]||(n[12]=t("p",null,[t("b",null,"Responsabilidades:")],-1)),t("div",{innerHTML:a.vacancy.responsibilities},null,8,V),n[13]||(n[13]=t("p",null,[t("b",null,"Requisitos:")],-1)),t("div",{innerHTML:a.vacancy.requirements},null,8,w),l.candidato?(i(),m(g,{key:1,class:"btn success",type:"button",loading:a.loading,onClick:l.apply},{default:r(()=>n[6]||(n[6]=[o(" Candidatar-se ")])),_:1},8,["loading","onClick"])):u("",!0),l.logado?u("",!0):(i(),m(d,{key:2,class:"btn success",to:{name:"login",query:{redirect:a.vacancy.id}}},{default:r(()=>n[7]||(n[7]=[o(" Cadastre-se ")])),_:1},8,["to"]))])])}const j=b(T,[["render",_],["__scopeId","data-v-ded25241"]]);export{j as default};
