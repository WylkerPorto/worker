import{h as f,F as U,c as C,a as x}from"./http-k4dDA2rv.js";import{M as N}from"./SwitchButton-DBkgXeZd.js";import{I as k,_ as v,c as m,a as t,b as V,t as y,n as _,e as r,r as c,F as E,i as A,g as D,o as d,k as w,v as M,j as I,w as b,h as O,l as F,f as L}from"./index-CmUdRF9_.js";import{M as P}from"./moment-Bh8uCWqE.js";import{g as B,u as q}from"./user-DSEsO9q1.js";const T={name:"MySelect",props:{modelValue:{type:[String,Number,null],required:!0},options:{type:Array,required:!0},label:{type:String,required:!1},error:{type:String,required:!1}},data(){return{isOpen:!1}},components:{Icon:k},computed:{selectedOptionTitle(){const i=this.options.find(o=>o.title===this.modelValue);return i?i.title:null}},mounted(){document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},methods:{toggleDropdown(){this.isOpen=!this.isOpen},selectOption(i){this.$emit("update:modelValue",i.title),this.isOpen=!1},handleClickOutside(i){this.$el.contains(i.target)||(this.isOpen=!1)}}},j={class:"wrapper"},H={key:0,class:"label"},G={class:"value"},R={key:1,class:"dropdown"},z=["onClick"],J={key:0,class:"error"};function K(i,o,n,p,e,a){const s=c("Icon");return d(),m("main",null,[t("div",j,[n.label?(d(),m("label",H,y(n.label),1)):V("",!0),t("div",{class:_(["select",{error:!!n.error}]),onClick:o[0]||(o[0]=(...u)=>a.toggleDropdown&&a.toggleDropdown(...u))},[t("span",G,y(a.selectedOptionTitle||"Selecione"),1),t("span",{class:_(["arrow",{open:e.isOpen}])},[r(s,{icon:"bx:down-arrow"})],2)],2),e.isOpen?(d(),m("ul",R,[(d(!0),m(E,null,A(n.options,u=>(d(),m("li",{key:u.id,onClick:D(g=>a.selectOption(u),["stop"]),class:_(["option",{selected:u.title===n.modelValue}])},y(u.title),11,z))),128))])):V("",!0)]),n.error?(d(),m("span",J,y(n.error),1)):V("",!0)])}const Q=v(T,[["render",K],["__scopeId","data-v-0a41f1a2"]]),W={name:"MyAccordeon",props:{title:{type:String,required:!0},isOpen:{type:Boolean,default:!1}},data(){return{expanded:!1}},components:{Icon:k},mounted(){this.expanded=this.isOpen},methods:{toggle(){this.expanded=!this.expanded}}},X={class:"accordeon"},Y={class:"title"},Z={class:"body"};function $(i,o,n,p,e,a){const s=c("Icon");return d(),m("div",X,[t("div",{class:_(["header",{expanded:e.expanded}]),onClick:o[0]||(o[0]=(...u)=>a.toggle&&a.toggle(...u))},[t("span",Y,y(n.title),1),r(s,{icon:"bx:down-arrow"})],2),w(t("div",Z,[I(i.$slots,"default",{},void 0)],512),[[M,e.expanded]])])}const ee=v(W,[["render",$],["__scopeId","data-v-e0d60593"]]),oe=()=>f.authApi().get("/filter/disability"),le=()=>f.authApi().get("/filter/gender"),re=()=>f.authApi().get("/filter/maritalstatus"),te=()=>f.authApi().get("/filter/nationality"),se=()=>f.authApi().get("/filter/education-level"),ie=()=>f.authApi().get("/filter/education-status"),ne=()=>f.authApi().get("/filter/language-level"),ae={name:"UserCurriculum",data(){return{id:null,form:{name:"",email:"",password:"",cpf:"",rg:"",cnh:"",typeCnh:"",hasDisability:!1,typeDisability:"",gender:"",marital_status_id:null,nationality:"",phoneNumber:"",phoneNumber2:"",available_to_travel:!1,salary_claim:null,first_job:!1,presentation:"",postal_code:"",street:"",number:null,complement:"",neighborhood:"",city:"",state:"",country:"",facebook_url:"",instagram_url:"",linkedin_url:"",personal_url:""},disabilities:[],genders:[],maritalStatus:[],nationalities:[],educationLevels:[],educationStatus:[],languageLevels:[],errors:{},loading:!1}},components:{FormInput:U,MySwitch:N,MySelect:Q,MyButton:P,MyAccordeon:ee},watch:{"form.hasDisability"(i){i||(this.form.typeDisability="")}},created(){this.loadFilters(),this.loadData(),this.id=localStorage.getItem("uid")},methods:{validate(){C({name:x().min(3,"Nome deve ter pelo menos 3 caracteres").required("Nome é obrigatório"),gender:x().min(1,"Selecione um sexo").required("Sexo é obrigatório")}).validate(this.form,{abortEarly:!1}).then(()=>{this.errors={},this.submitForm()}).catch(o=>{const n={};o.inner.forEach(p=>{n[p.path]=p.message}),this.errors=n})},async submitForm(){this.loading=!0;try{delete this.form.id,delete this.form.password,delete this.form.createdAt,delete this.form.updatedAt,console.log("Form submitted with data:",this.form);const i=await q(this.id,this.form);console.log(i)}catch(i){console.log(i)}finally{this.loading=!1}},async loadFilters(){try{const i=await oe(),o=await le(),n=await re(),p=await te(),e=await se(),a=await ie(),s=await ne();this.disabilities=i.data,this.genders=o.data,this.maritalStatus=n.data,this.nationalities=p.data,this.educationLevels=e.data,this.educationStatus=a.data,this.languageLevels=s.data}catch(i){console.error("Error loading filters:",i)}},async loadData(){try{const i=localStorage.getItem("uid"),o=await B(i);this.form={...this.form,...o.data,hasDisability:!!o.data.hasDisability,available_to_travel:!!o.data.available_to_travel,first_job:!!o.data.first_job}}catch(i){console.error("Error loading data:",i)}}}},ue={class:"group"},de={class:"group"},me={class:"group flex"},pe={class:"group flex"},ce={class:"group flex"},fe={class:"switch"},ge={class:"group flex"},be={class:"group flex"},ye={class:"group"},he={class:"group"},Ve={class:"group flex"},_e={class:"group"},ve={class:"group flex"},xe={class:"group flex"},ke={class:"group flex"},De={class:"switch"},we={class:"switch"},Se={class:"group"},Ue=["error"],Ce={class:"group flex"},Ne={class:"group flex"};function Ee(i,o,n,p,e,a){const s=c("FormInput"),u=c("MySwitch"),g=c("MySelect"),h=c("MyAccordeon"),S=c("MyButton");return d(),m("form",{onSubmit:o[29]||(o[29]=D((...l)=>a.validate&&a.validate(...l),["prevent"]))},[r(h,{title:"Dados pessoais",isOpen:!0},{default:b(()=>[t("div",ue,[r(s,{modelValue:e.form.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.form.name=l),error:e.errors.name,type:"text",placeholder:"Digite seu nome",label:"Name"},null,8,["modelValue","error"])]),t("div",de,[r(s,{modelValue:e.form.email,"onUpdate:modelValue":o[1]||(o[1]=l=>e.form.email=l),error:e.errors.email,type:"email",placeholder:"Digite seu e-mail",label:"Email"},null,8,["modelValue","error"])]),t("div",me,[r(s,{modelValue:e.form.cpf,"onUpdate:modelValue":o[2]||(o[2]=l=>e.form.cpf=l),error:e.errors.cpf,type:"text",placeholder:"Digite seu CPF",label:"CPF"},null,8,["modelValue","error"]),r(s,{modelValue:e.form.rg,"onUpdate:modelValue":o[3]||(o[3]=l=>e.form.rg=l),error:e.errors.rg,type:"text",placeholder:"Digite seu RG",label:"RG"},null,8,["modelValue","error"])]),t("div",pe,[r(s,{modelValue:e.form.cnh,"onUpdate:modelValue":o[4]||(o[4]=l=>e.form.cnh=l),error:e.errors.cnh,type:"text",placeholder:"Digite sua CNH",label:"CNH"},null,8,["modelValue","error"]),r(s,{modelValue:e.form.typeCnh,"onUpdate:modelValue":o[5]||(o[5]=l=>e.form.typeCnh=l),error:e.errors.typeCnh,type:"text",placeholder:"Digite o tipo de CNH",label:"Tipo de CNH"},null,8,["modelValue","error"])]),t("div",ce,[t("div",fe,[o[30]||(o[30]=t("span",null,"Possui deficiência?",-1)),r(u,{modelValue:e.form.hasDisability,"onUpdate:modelValue":o[6]||(o[6]=l=>e.form.hasDisability=l)},null,8,["modelValue"])]),e.form.hasDisability?(d(),O(g,{key:0,options:e.disabilities,modelValue:e.form.typeDisability,"onUpdate:modelValue":o[7]||(o[7]=l=>e.form.typeDisability=l),label:"Deficiência",error:e.errors.typeDisability},null,8,["options","modelValue","error"])):V("",!0)]),t("div",ge,[r(g,{options:e.genders,modelValue:e.form.gender,"onUpdate:modelValue":o[8]||(o[8]=l=>e.form.gender=l),label:"Sexo",error:e.errors.gender},null,8,["options","modelValue","error"]),r(g,{options:e.maritalStatus,modelValue:e.form.marital_status_id,"onUpdate:modelValue":o[9]||(o[9]=l=>e.form.marital_status_id=l),label:"Estado Civil",error:e.errors.marital_status_id},null,8,["options","modelValue","error"])]),t("div",be,[r(s,{modelValue:e.form.phoneNumber,"onUpdate:modelValue":o[10]||(o[10]=l=>e.form.phoneNumber=l),error:e.errors.phoneNumber,type:"tel",mask:"tel",placeholder:"(99) 99999-9999",label:"Telefone"},null,8,["modelValue","error"]),r(s,{modelValue:e.form.phoneNumber2,"onUpdate:modelValue":o[11]||(o[11]=l=>e.form.phoneNumber2=l),error:e.errors.phoneNumber2,type:"tel",mask:"tel",placeholder:"(99) 99999-9999",label:"Telefone 2"},null,8,["modelValue","error"])])]),_:1}),r(h,{title:"Localidade"},{default:b(()=>[t("div",ye,[r(g,{options:e.nationalities,modelValue:e.form.nationality,"onUpdate:modelValue":o[12]||(o[12]=l=>e.form.nationality=l),label:"Nacionalidade",error:e.errors.nationality},null,8,["options","modelValue","error"])]),t("div",he,[r(s,{modelValue:e.form.postal_code,"onUpdate:modelValue":o[13]||(o[13]=l=>e.form.postal_code=l),error:e.errors.postal_code,type:"text",placeholder:"Digite o CEP",label:"CEP"},null,8,["modelValue","error"])]),t("div",Ve,[r(s,{modelValue:e.form.street,"onUpdate:modelValue":o[14]||(o[14]=l=>e.form.street=l),error:e.errors.street,type:"text",placeholder:"Digite a rua",label:"Rua"},null,8,["modelValue","error"]),r(s,{modelValue:e.form.number,"onUpdate:modelValue":o[15]||(o[15]=l=>e.form.number=l),error:e.errors.number,type:"number",placeholder:"555",label:"Número"},null,8,["modelValue","error"])]),t("div",_e,[r(s,{modelValue:e.form.complement,"onUpdate:modelValue":o[16]||(o[16]=l=>e.form.complement=l),error:e.errors.complement,type:"text",placeholder:"Fundo A",label:"Complemento"},null,8,["modelValue","error"])]),t("div",ve,[r(s,{modelValue:e.form.neighborhood,"onUpdate:modelValue":o[17]||(o[17]=l=>e.form.neighborhood=l),error:e.errors.neighborhood,type:"text",placeholder:"Limeira",label:"Bairro"},null,8,["modelValue","error"]),r(s,{modelValue:e.form.city,"onUpdate:modelValue":o[18]||(o[18]=l=>e.form.city=l),error:e.errors.city,type:"text",placeholder:"São Paulo",label:"Cidade"},null,8,["modelValue","error"])]),t("div",xe,[r(s,{modelValue:e.form.state,"onUpdate:modelValue":o[19]||(o[19]=l=>e.form.state=l),error:e.errors.state,type:"text",placeholder:"SP",label:"Estado"},null,8,["modelValue","error"]),r(s,{modelValue:e.form.country,"onUpdate:modelValue":o[20]||(o[20]=l=>e.form.country=l),error:e.errors.country,type:"text",placeholder:"Brasil",label:"País"},null,8,["modelValue","error"])])]),_:1}),r(h,{title:"Profissional"},{default:b(()=>[t("div",ke,[t("div",De,[o[31]||(o[31]=t("span",null,"Disponibilidade para viagem?",-1)),r(u,{modelValue:e.form.available_to_travel,"onUpdate:modelValue":o[21]||(o[21]=l=>e.form.available_to_travel=l)},null,8,["modelValue"])]),t("div",we,[o[32]||(o[32]=t("span",null,"Primeiro Emprego?",-1)),r(u,{modelValue:e.form.first_job,"onUpdate:modelValue":o[22]||(o[22]=l=>e.form.first_job=l)},null,8,["modelValue"])]),r(s,{modelValue:e.form.salary_claim,"onUpdate:modelValue":o[23]||(o[23]=l=>e.form.salary_claim=l),error:e.errors.salary_claim,type:"number",placeholder:"5000",label:"Pretensão Salarial"},null,8,["modelValue","error"])])]),_:1}),r(h,{title:"Social"},{default:b(()=>[t("div",Se,[w(t("textarea",{"onUpdate:modelValue":o[24]||(o[24]=l=>e.form.presentation=l),error:e.errors.presentation,placeholder:"Apresentação"},null,8,Ue),[[F,e.form.presentation]])]),t("div",Ce,[r(s,{modelValue:e.form.facebook_url,"onUpdate:modelValue":o[25]||(o[25]=l=>e.form.facebook_url=l),error:e.errors.facebook_url,type:"url",placeholder:"Digite o link do facebook",label:"Facebook"},null,8,["modelValue","error"]),r(s,{modelValue:e.form.instagram_url,"onUpdate:modelValue":o[26]||(o[26]=l=>e.form.instagram_url=l),error:e.errors.instagram_url,type:"url",placeholder:"Digite o link do instagram",label:"Instagram"},null,8,["modelValue","error"])]),t("div",Ne,[r(s,{modelValue:e.form.linkedin_url,"onUpdate:modelValue":o[27]||(o[27]=l=>e.form.linkedin_url=l),error:e.errors.linkedin_url,type:"url",placeholder:"Digite o link do linkedin",label:"LinkedIn"},null,8,["modelValue","error"]),r(s,{modelValue:e.form.personal_url,"onUpdate:modelValue":o[28]||(o[28]=l=>e.form.personal_url=l),error:e.errors.personal_url,type:"url",placeholder:"Digite o link pessoal",label:"Site Pessoal"},null,8,["modelValue","error"])])]),_:1}),r(S,{class:"primary",loading:e.loading},{default:b(()=>o[33]||(o[33]=[L("Atualizar")])),_:1},8,["loading"])],32)}const Ae=v(ae,[["render",Ee],["__scopeId","data-v-3ab5dbc5"]]),Me={name:"UserProfile",components:{Curriculum:Ae}};function Ie(i,o,n,p,e,a){const s=c("Curriculum");return d(),m("div",null,[r(s)])}const qe=v(Me,[["render",Ie],["__scopeId","data-v-65fd4b71"]]);export{qe as default};
