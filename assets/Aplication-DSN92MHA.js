import{a as f}from"./aplication-D-9Si2EU.js";import{S as _}from"./SearchInput-Dz10qtPx.js";import{I as k,_ as v,c as u,a as t,h as I,b as M,t as o,g as S,e as n,r as p,F as V,i as b,f as s,w as m,o as d}from"./index-BBRSQRce.js";import{M as B}from"./MyButton-CPGQxF9f.js";import"./http-C1CqThx4.js";import"./conversors-BXIEm-hF.js";const A={name:"UserAplication",components:{SearchInput:_,Icon:k,MyButton:B},data(){return{items:[],loading:!1,editItem:{},total:0,page:1,search:""}},mounted(){this.getApplications()},methods:{async getApplications(){this.loading=!0;try{const r=await f(localStorage.getItem("uid"),this.filters);this.total=r.data.meta.total,this.items.push(...r.data.data)}catch(r){this.$snotify.error("Erro ao buscar as vagas: "+r)}finally{this.loading=!1}},handleSearch(){this.page=1,this.items=[],this.getApplications()},handleLoadMore(){this.page+=1,this.getApplications()}},computed:{filters(){return{page:this.page,search:this.search}},loadMore(){return this.items.length<this.total}}},w={class:"container"};function x(r,e,C,L,l,i){const h=p("SearchInput"),c=p("Icon"),g=p("RouterLink"),y=p("MyButton");return d(),u("main",w,[t("header",null,[t("h1",null,"Vagas candidatadas "+o(l.total),1),t("form",{onSubmit:e[1]||(e[1]=S((...a)=>i.handleSearch&&i.handleSearch(...a),["stop","prevent"]))},[n(h,{modelValue:l.search,"onUpdate:modelValue":e[0]||(e[0]=a=>l.search=a)},null,8,["modelValue"])],32)]),t("section",null,[(d(!0),u(V,null,b(l.items,a=>(d(),u("div",{class:"card",key:a.id},[t("h2",null,o(a.vacancy.title),1),t("article",null,[t("p",null,[n(c,{icon:"solar:point-on-map-bold"}),s(" "+o(a.vacancy.city)+" - "+o(a.vacancy.state),1)]),t("p",null,[n(c,{icon:"ic:baseline-work"}),s(" "+o(a.vacancy.workModel)+" - "+o(a.vacancy.employmentType),1)]),t("p",null,[n(c,{icon:"solar:calendar-bold"}),s(" "+o(a.vacancy.expirationDate),1)]),t("p",null,[n(c,{icon:"pajamas:status"}),s(" "+o(a.status),1)])]),n(g,{class:"btn primary",to:{name:"userVacancyDetail",params:{id:a.vacancy.id}},target:"_blank"},{default:m(()=>e[2]||(e[2]=[s(" Ver detalhes ")])),_:2},1032,["to"])]))),128))]),i.loadMore?(d(),I(y,{key:0,onClick:i.handleLoadMore},{default:m(()=>e[3]||(e[3]=[s("Carregar mais")])),_:1},8,["onClick"])):M("",!0)])}const T=v(A,[["render",x],["__scopeId","data-v-a29b2d2a"]]);export{T as default};
