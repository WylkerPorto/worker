import{g as m}from"./aplication-BkJgJRJf.js";import{g as h}from"./vacancy-DHjj5IAJ.js";import{D as p}from"./DataTable-t-TnjhHE.js";import{I as g,_ as y,c as u,a as o,e as s,t as _,w as n,r as i,o as f}from"./index-6U5DvoG4.js";import"./http-C2DCJvKC.js";import"./conversors-DLOhcvO0.js";import"./SearchInput-CeBoeNkG.js";import"./MyButton-BYX1gFvO.js";const V={name:"AplicationsVacancy",components:{DataTable:p,Icon:g},data(){return{vaga:{},items:[],columns:[{key:"person.name",title:"Nome"},{key:"person.email",title:"Email"},{key:"status",title:"Estado"},{key:"createdAt",title:"Criado em",type:"date"}],loading:!1,total:0,page:1,search:""}},mounted(){this.getAplicationsByVacancy(),this.getVacancyDetail()},methods:{async getAplicationsByVacancy(){this.loading=!0;try{const a=await m(this.$route.params.id,this.filters);this.items.push(...a.data.data),this.total=a.data.meta.total}catch(a){this.$snotify.error(a)}finally{this.loading=!1}},async getVacancyDetail(){this.loading=!0;try{const a=await h(this.$route.params.id);this.vaga=a.data}catch(a){this.$snotify.error(a)}finally{this.loading=!1}},handleLoadMore(){this.page++,this.getAplicationsByVacancy()},handleSearch(a){this.search=a,this.page=1,this.items=[],this.getAplicationsByVacancy()}},computed:{filters(){return{page:this.page,search:this.search}},loadMore(){return this.page<this.total}}},k={class:"card"};function A(a,B,D,M,t,e){const r=i("Icon"),c=i("RouterLink"),l=i("DataTable");return f(),u("main",null,[o("section",k,[o("header",null,[o("h1",null,"Candidatos a vaga "+_(t.vaga.title),1)]),s(l,{items:t.items,columns:t.columns,loading:t.loading,total:t.total,loadMore:e.loadMore,onOnLoadMore:e.handleLoadMore,onOnSearch:e.handleSearch},{actions:n(({item:d})=>[s(c,{class:"rounded primary",to:{name:"recruiterCandidateDetail",params:{id:d.person.id}},title:"Ver Candidato",target:"_blank"},{default:n(()=>[s(r,{icon:"mdi:user"})]),_:2},1032,["to"])]),_:1},8,["items","columns","loading","total","loadMore","onOnLoadMore","onOnSearch"])])])}const O=y(V,[["render",A],["__scopeId","data-v-3cab495b"]]);export{O as default};
