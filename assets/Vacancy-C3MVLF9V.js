import{D as p}from"./DataTable-CnAYPmaw.js";import{I as h,_ as u,c as g,a as i,e as o,w as r,r as l,o as f}from"./index-CE6mVOuz.js";import{l as _}from"./vacancy-SFdJcNdy.js";import"./SearchInput-B0ahrWZm.js";import"./conversors-Cr9q1EG2.js";import"./MyButton-BnYoF38R.js";import"./http-Bhklev2d.js";const y={name:"SupervisorVacancy",components:{DataTable:p,Icon:h},data(){return{loading:!1,columns:[{key:"title",title:"Título"},{key:"employmentType",title:"Tipo de vaga"},{key:"status",title:"Status"},{key:"expirationDate",title:"Data de Expiração",type:"date"}],items:[],total:0,page:1,totalPage:0,search:""}},mounted(){this.getVacancies()},methods:{async getVacancies(){this.loading=!0;try{const{data:t}=await _(this.filters);console.log(t),this.items=t.vacancies,this.total=t.total,this.totalPage=Math.ceil(t.total/t.rows)}catch(t){this.$snotify.error(t)}finally{this.loading=!1}},handleSearch(t){this.search=t,this.page=1,this.items=[],this.getVacancies()},handleLoadMore(t){this.page+=t,this.getVacancies()}},computed:{filters(){return{page:this.page,search:this.search}}}},V={class:"card"};function P(t,e,k,v,a,n){const c=l("Icon"),m=l("RouterLink"),d=l("DataTable");return f(),g("main",null,[i("section",V,[e[2]||(e[2]=i("header",null,[i("h1",null,"Vagas")],-1)),o(d,{items:a.items,columns:a.columns,loading:a.loading,totalItems:a.total,totalPage:a.totalPage,currentPage:a.page,onOnSearch:n.handleSearch,onOnNextPage:e[0]||(e[0]=s=>n.handleLoadMore(1)),onOnPreviousPage:e[1]||(e[1]=s=>n.handleLoadMore(-1))},{actions:r(({item:s})=>[o(m,{class:"rounded primary",to:{name:"supervisorVacancyDetail",params:{id:s.id}},title:"Ver Candidatos"},{default:r(()=>[o(c,{icon:"mdi:user"})]),_:2},1032,["to"]),o(m,{class:"rounded primary",to:{name:"jobDetail",params:{slug:s.slug}},target:"_blank",title:"Compartilhar Vaga"},{default:r(()=>[o(c,{icon:"mdi:share"})]),_:2},1032,["to"])]),_:1},8,["items","columns","loading","totalItems","totalPage","currentPage","onOnSearch"])])])}const w=u(y,[["render",P],["__scopeId","data-v-50a15f6b"]]);export{w as default};
